---
import Button from './Button.astro';
import Card from './Card.astro';
import Modal from './Modal.astro';

const cards = [
    {
        slide: 1, 
        carousel: 0,
        target: "scriptforze",
        src: "/ScriptForze/YonkersGarage.png",
        title: "Frontend",
        sortDescription: "E-commerce company and Backoffice",
    },
    {
        slide: 2, 
        carousel: 1,
        target: "colegium",
        src: "/Colegium/bannerColegium.png",
        title: "Senior Backend",
        sortDescription: "Intranet Company",
    },
    {
        slide: 3, 
        carousel: 2,
        target: "mrdomii",
        src: "/MrDomii/cardDomii.jpg",
        title: "Web FullStack",
        sortDescription: "E-commerce with Laravel",
    },
    {
        slide: 4, 
        carousel: 3,
        target: "sumapos",
        src: "/SumaPos/SumaposBanner.JPG",
        title: "Web Developer",
        sortDescription: "Web page, landing and Database",
    },
    {
        slide: 5, 
        carousel: 4,
        target: "vlooping",
        src: "/Vlooping/new-message.jpg",
        title: "iOS Developer",
        sortDescription: "Mobile social network",
    },
    {
        slide: 6, 
        carousel: 5,
        target: "realstaters",
        src: "/Realstaters/home1.jpg",
        title: "Web Designer",
        sortDescription: "Website design",
    },
]
---

<section id="proyects" class="m-auto w-full flex flex-col relative justify-center lg:w-11/12">
    <h1 class="text-white pb-5 text-center font-sans font-semibold text-3xl sm:pb-10 sm:text-5xl lg:text-6xl">
        Portfolio
    </h1>

    <div id="default-carousel" class="relative mx-auto w-11/12 sm:hidden" data-carousel="">
        <!-- Carousel wrapper slide-->
        <div class="relative overflow-hidden h-[500px] w-[250px]]">
            {
                cards.map(({ target, title, src, sortDescription}) => (
                    // Item 1
                    <div class="hidden outline-offset-2 duration-0 ease-in-out m-auto"
                     data-carousel-item
                     data-modal-target={`${target}-modal`}
                            data-modal-toggle={`${target}-modal`}>

                        <Card
                            title={title}
                            href={src}
                            classContainer="relative group flex flex-col justify-center w-full h-full transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl"
                            classImg="w-full h-full relative m-auto object-cover block"
                            classTitle="absolute hidden text-3xl t-5 group-hover:block z-30 top-28 self-center"
                        >
                            <span class="absolute top-96 z-0 h-0.5 w-0.5 rounded-full bg-secondary opacity-75 transition-all duration-500 group-hover:scale-[630] sm:group-hover:scale-[550]" />
                            <div class="absolute hidden z-30 min-w-60 max-w-60 top-32 self-center group-hover:block">
                                <div class="space-y-6 pt-5 pb-5 text-base transition-all duration-300 group-hover:text-white/90">
                                    <p class="text-center">{sortDescription}</p>
                                </div>
                                <Button class="text-skin hover:text-white border-skin hover:bg-skin focus:ring-4 focus:outline-none focus:ring-skin font-medium rounded-lg px-2 me-2 mb-2 dark:border-skin dark:text-skin dark:hover:text-primary hover:font-semibold dark:hover:bg-skin dark:focus:ring-yellow-900 border-2 absolute left-16 sm:text-xl sm:border-4 lg:text-sm lg:border-6">See More ⇨</Button>
                            </div>
                        </Card>
                    </div>
                ))
            }
        </div>
        <!-- Slider indicators -->
        <div class="absolute z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3 rtl:space-x-reverse">
            {
                cards.map(({ slide, carousel}) => (
                    <button 
                        type="button" 
                        class="w-3 h-3 rounded-full bg-skin" 
                        aria-current="true" 
                        aria-label={`Slide ${slide}`}
                        data-carousel-slide-to={carousel}
                    />
                ))
            }
        </div>
        <!-- Slider controls -->
        <button 
            type="button" 
            class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" 
            data-carousel-prev
        >
            <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-skin/30 dark:bg-skin/30 group-hover:bg-white/50 dark:group-hover:bg-skin/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-primary/70 group-focus:outline-none">
                <svg 
                    class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" 
                    aria-hidden="true" 
                    xmlns="http://www.w3.org/2000/svg" 
                    fill="none" 
                    viewBox="0 0 6 10"
                >
                    <path 
                        stroke="currentColor" 
                        stroke-linecap="round" 
                        stroke-linejoin="round" 
                        stroke-width="2" 
                        d="M5 1 1 5l4 4"
                    />
                </svg>
                <span class="sr-only">Previous</span>
            </span>
        </button>
        <button 
            type="button" 
            class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" 
            data-carousel-next
        >
            <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-skin/30 group-hover:bg-white/50 dark:group-hover:bg-skin/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-primary/70 group-focus:outline-none">
                <svg 
                    class="w-4 h-4 text-white dark:text-gray-800 rtl:rotate-180" 
                    aria-hidden="true" xmlns="http://www.w3.org/2000/svg" 
                    fill="none" 
                    viewBox="0 0 6 10"
                >
                    <path 
                        stroke="currentColor" 
                        stroke-linecap="round" 
                        stroke-linejoin="round" 
                        stroke-width="2" d="m1 9 4-4-4-4"
                    />
                </svg>
                <span class="sr-only">Next</span>
            </span>
        </button>
    </div>

    <div class="hidden m-auto gap-10 sm:grid sm:grid-cols-2 xl:grid-cols-3">
        {
            cards.map(({ title, src, sortDescription}) => (
                <Card
                    title={title}
                    href={src}
                    classContainer="items-center group relative cursor-pointer overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl flex flex-col justify-center"
                    classImg="w-80 h-80 object-cover"
                    classTitle="absolute hidden text-3xl t-5 group-hover:block z-10 top-28 self-center"
                >
                    <span class="absolute top-96 z-0 h-0.5 w-0.5 rounded-full bg-secondary opacity-75 transition-all duration-500 group-hover:scale-[550]"></span>
                    <div class="absolute hidden z-10 min-w-60 max-w-60 top-32 self-center group-hover:block">
                        <div class="space-y-6 pt-5 pb-5 text-base transition-all duration-300 group-hover:text-white/90">
                            <p class="text-center">{sortDescription}</p>
                        </div>
                        <Button class="text-skin hover:text-white border-skin hover:bg-skin focus:ring-4 focus:outline-none focus:ring-skin font-medium rounded-lg px-2 me-2 mb-2 dark:border-skin dark:text-skin dark:hover:text-primary hover:font-semibold dark:hover:bg-skin dark:focus:ring-yellow-900 border-2 absolute left-16 sm:text-xl sm:border-4 lg:text-sm lg:border-6">See More ⇨</Button>
                    </div>
                </Card>

            ))
        }
    </div>
    <div class="flex justify-center pt-14">
        <Button class="text-skin hover:text-white border-skin hover:bg-skin focus:ring-4 focus:outline-none focus:ring-skin font-medium rounded-lg px-2 py-2 me-2 mb-2 dark:border-skin dark:text-skin dark:hover:text-primary hover:font-semibold dark:hover:bg-skin dark:focus:ring-yellow-900 border-2 text-lg sm:text-xl sm:border-4 lg:text-3xl lg:border-6">View More</Button>
    </div>

    {
        cards.map(({ target }) => (
            <div id={`${target}-modal`} tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
                <Modal targets={target} />
            </div>
        ))
    }
</section>
